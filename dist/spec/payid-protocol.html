<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>PayID Protocol</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
      /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
      a.info {
          /* This is the key. */
          position: relative;
          z-index: 24;
          text-decoration: none;
      }
      a.info:hover {
          z-index: 25;
          color: #FFF; background-color: #900;
      }
      a.info span { display: none; }
      a.info:hover span.info {
          /* The span will display just on :hover state. */
          display: block;
          position: absolute;
          font-size: smaller;
          top: 2em; left: -5em; width: 15em;
          padding: 2px; border: 1px solid #333;
          color: #900; background-color: #EEE;
          text-align: left;
      }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  max-width: 55em;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Terminology">
<link href="#rfc.section.2" rel="Chapter" title="2 Introduction">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Design Goals">
<link href="#rfc.section.3" rel="Chapter" title="3 PayID Server Discovery">
<link href="#rfc.section.4" rel="Chapter" title="4 JSON Format Design">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 HTTP Method">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Media Type of the Payment Account(s) Information Resource">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Response for application/* + json">
<link href="#rfc.section.4.3.1" rel="Chapter" title="4.3.1 payId">
<link href="#rfc.section.4.3.2" rel="Chapter" title="4.3.2 addresses">
<link href="#rfc.section.4.3.3" rel="Chapter" title="4.3.3 memo">
<link href="#rfc.section.4.3.4" rel="Chapter" title="4.3.4 identity">
<link href="#rfc.section.4.3.5" rel="Chapter" title="4.3.5 proofOfControlSignature">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Meaning of Media Type application/* + json">
<link href="#rfc.section.5" rel="Chapter" title="5 Header Fields">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Common Headers">
<link href="#rfc.section.5.1.1" rel="Chapter" title="5.1.1 Header Content-Type">
<link href="#rfc.section.5.1.2" rel="Chapter" title="5.1.2 Header Content-Length">
<link href="#rfc.section.5.1.3" rel="Chapter" title="5.1.3 Header PayID-version (TODO)">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Request Headers">
<link href="#rfc.section.5.2.1" rel="Chapter" title="5.2.1 Header Accept">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 Response Headers">
<link href="#rfc.section.5.3.1" rel="Chapter" title="5.3.1 Header Cache-Control">
<link href="#rfc.section.6" rel="Chapter" title="6 Extensibility">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Payload Extensibility">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Header Field Extensibility">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 Format Extensibility">
<link href="#rfc.section.7" rel="Chapter" title="7 Basic PayID Protocol">
<link href="#rfc.section.7.1" rel="Chapter" title="7.1 Step 1: HTTP Request to PayID URL using HTTP GET Method">
<link href="#rfc.section.7.2" rel="Chapter" title="7.2 Step 2: Payment Account Information Response">
<link href="#rfc.section.7.3" rel="Chapter" title="7.3 Step 3: Parse Payment Account Information Response">
<link href="#rfc.section.8" rel="Chapter" title="8 Example Use of Basic PayID Protocol">
<link href="#rfc.section.8.1" rel="Chapter" title="8.1 Basic PayID Protocol by a Wallet">
<link href="#rfc.section.9" rel="Chapter" title="9 Common Response Status Codes (TODO)">
<link href="#rfc.section.9.1" rel="Chapter" title="9.1 Success Responses">
<link href="#rfc.section.9.1.1" rel="Chapter" title="9.1.1 Response Code 200 OK">
<link href="#rfc.section.9.1.2" rel="Chapter" title="9.1.2 Response Code 3xx Redirection">
<link href="#rfc.section.9.2" rel="Chapter" title="9.2 Client Error Responses">
<link href="#rfc.section.10" rel="Chapter" title="10 Content Negotiation">
<link href="#rfc.section.11" rel="Chapter" title="11 Versioning(TODO)">
<link href="#rfc.section.12" rel="Chapter" title="12 Security Considerations">
<link href="#rfc.section.12.1" rel="Chapter" title="12.1 Network Attacks">
<link href="#rfc.section.12.1.1" rel="Chapter" title="12.1.1 Denial-of-Service (DoS) attacks">
<link href="#rfc.section.12.2" rel="Chapter" title="12.2 Information Integrity">
<link href="#rfc.section.13" rel="Chapter" title="13 Privacy Considerations">
<link href="#rfc.section.13.1" rel="Chapter" title="13.1 Access Control">
<link href="#rfc.section.13.2" rel="Chapter" title="13.2 Payment Address Rotation">
<link href="#rfc.section.13.3" rel="Chapter" title="13.3 On the Wire">
<link href="#rfc.section.13.4" rel="Chapter" title="13.4 In the PayID Server">
<link href="#rfc.section.14" rel="Chapter" title="14 IANA Considerations">
<link href="#rfc.section.14.1" rel="Chapter" title="14.1 Header Field Registration">
<link href="#rfc.section.14.2" rel="Chapter" title="14.2 Media Type Registration">
<link href="#rfc.section.15" rel="Chapter" title="15 Acknowledgments">
<link href="#rfc.references" rel="Chapter" title="16 References">
<link href="#rfc.references.1" rel="Chapter" title="16.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="16.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content="xml2rfc version 2.46.0 - https://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="Malhotra, A. and D. Schwartz" />
  <meta name="dct.identifier" content="urn:ietf:id:draft-aanchal-payid-protocol-01" />
  <meta name="dct.issued" scheme="ISO8601" content="2020-07-17" />
  <meta name="dct.abstract" content="This specification defines the PayID protocol - an application-layer protocol, which can be used to interact with a PayID-enabled service provider. The primary use case is to discover payment account information along with optional metadata identified by a PayID . The protocol is based on HTTP transfer of PayID protocol messages over a secure transport. " />
  <meta name="description" content="This specification defines the PayID protocol - an application-layer protocol, which can be used to interact with a PayID-enabled service provider. The primary use case is to discover payment account information along with optional metadata identified by a PayID . The protocol is based on HTTP transfer of PayID protocol messages over a secure transport. " />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">A. Malhotra</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">D. Schwartz</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">Ripple</td>
</tr>
<tr>
<td class="left">Expires: January 18, 2021</td>
<td class="right">July 17, 2020</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">PayID Protocol<br />
  <span class="filename">draft-aanchal-payid-protocol-01</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This specification defines the PayID protocol - an application-layer protocol, which can be used to interact with a PayID-enabled service provider. The primary use case is to discover payment account information along with optional metadata identified by a PayID <a href="#PAYID-URI" class="xref">[PAYID-URI]</a>. The protocol is based on HTTP transfer of PayID protocol messages over a secure transport.</p>
<h1><a>Feedback</a></h1>
<p>This specification is a draft proposal, and is part of the <a href="https://payid.org/">PayID Protocol </a> work. Feedback related to this specification should be sent to <a href="mailto:rfcs@payid.org">rfcs@payid.org</a>.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of This Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet-Drafts is at https://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on January 18, 2021.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2020 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (https://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Terminology</a>
</li>
<li>2.   <a href="#rfc.section.2">Introduction</a>
</li>
<ul><li>2.1.   <a href="#rfc.section.2.1">Design Goals</a>
</li>
</ul><li>3.   <a href="#rfc.section.3">PayID Server Discovery</a>
</li>
<li>4.   <a href="#rfc.section.4">JSON Format Design</a>
</li>
<ul><li>4.1.   <a href="#rfc.section.4.1">HTTP Method</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Media Type of the Payment Account(s) Information Resource</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Response for application/* + json</a>
</li>
<ul><li>4.3.1.   <a href="#rfc.section.4.3.1">payId</a>
</li>
<li>4.3.2.   <a href="#rfc.section.4.3.2">addresses</a>
</li>
<li>4.3.3.   <a href="#rfc.section.4.3.3">memo</a>
</li>
<li>4.3.4.   <a href="#rfc.section.4.3.4">identity</a>
</li>
<li>4.3.5.   <a href="#rfc.section.4.3.5">proofOfControlSignature</a>
</li>
</ul><li>4.4.   <a href="#rfc.section.4.4">Meaning of Media Type application/* + json</a>
</li>
</ul><li>5.   <a href="#rfc.section.5">Header Fields</a>
</li>
<ul><li>5.1.   <a href="#rfc.section.5.1">Common Headers</a>
</li>
<ul><li>5.1.1.   <a href="#rfc.section.5.1.1">Header Content-Type</a>
</li>
<li>5.1.2.   <a href="#rfc.section.5.1.2">Header Content-Length</a>
</li>
<li>5.1.3.   <a href="#rfc.section.5.1.3">Header PayID-version (TODO)</a>
</li>
</ul><li>5.2.   <a href="#rfc.section.5.2">Request Headers</a>
</li>
<ul><li>5.2.1.   <a href="#rfc.section.5.2.1">Header Accept</a>
</li>
</ul><li>5.3.   <a href="#rfc.section.5.3">Response Headers</a>
</li>
<ul><li>5.3.1.   <a href="#rfc.section.5.3.1">Header Cache-Control</a>
</li>
</ul></ul><li>6.   <a href="#rfc.section.6">Extensibility</a>
</li>
<ul><li>6.1.   <a href="#rfc.section.6.1">Payload Extensibility</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">Header Field Extensibility</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">Format Extensibility</a>
</li>
</ul><li>7.   <a href="#rfc.section.7">Basic PayID Protocol</a>
</li>
<ul><li>7.1.   <a href="#rfc.section.7.1">Step 1: HTTP Request to PayID URL using HTTP GET Method</a>
</li>
<li>7.2.   <a href="#rfc.section.7.2">Step 2: Payment Account Information Response</a>
</li>
<li>7.3.   <a href="#rfc.section.7.3">Step 3: Parse Payment Account Information Response</a>
</li>
</ul><li>8.   <a href="#rfc.section.8">Example Use of Basic PayID Protocol</a>
</li>
<ul><li>8.1.   <a href="#rfc.section.8.1">Basic PayID Protocol by a Wallet</a>
</li>
</ul><li>9.   <a href="#rfc.section.9">Common Response Status Codes (TODO)</a>
</li>
<ul><li>9.1.   <a href="#rfc.section.9.1">Success Responses</a>
</li>
<ul><li>9.1.1.   <a href="#rfc.section.9.1.1">Response Code 200 OK</a>
</li>
<li>9.1.2.   <a href="#rfc.section.9.1.2">Response Code 3xx Redirection</a>
</li>
</ul><li>9.2.   <a href="#rfc.section.9.2">Client Error Responses</a>
</li>
</ul><li>10.   <a href="#rfc.section.10">Content Negotiation</a>
</li>
<li>11.   <a href="#rfc.section.11">Versioning(TODO)</a>
</li>
<li>12.   <a href="#rfc.section.12">Security Considerations</a>
</li>
<ul><li>12.1.   <a href="#rfc.section.12.1">Network Attacks</a>
</li>
<ul><li>12.1.1.   <a href="#rfc.section.12.1.1">Denial-of-Service (DoS) attacks</a>
</li>
</ul><li>12.2.   <a href="#rfc.section.12.2">Information Integrity</a>
</li>
</ul><li>13.   <a href="#rfc.section.13">Privacy Considerations</a>
</li>
<ul><li>13.1.   <a href="#rfc.section.13.1">Access Control</a>
</li>
<li>13.2.   <a href="#rfc.section.13.2">Payment Address Rotation</a>
</li>
<li>13.3.   <a href="#rfc.section.13.3">On the Wire</a>
</li>
<li>13.4.   <a href="#rfc.section.13.4">In the PayID Server</a>
</li>
</ul><li>14.   <a href="#rfc.section.14">IANA Considerations</a>
</li>
<ul><li>14.1.   <a href="#rfc.section.14.1">Header Field Registration</a>
</li>
<li>14.2.   <a href="#rfc.section.14.2">Media Type Registration</a>
</li>
</ul><li>15.   <a href="#rfc.section.15">Acknowledgments</a>
</li>
<li>16.   <a href="#rfc.references">References</a>
</li>
<ul><li>16.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>16.2.   <a href="#rfc.references.2">Informative References</a>
</li>
</ul><li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#terminology" id="terminology">Terminology</a>
</h1>
<p id="rfc.section.1.p.1">This protocol can be referred to as the <samp>Basic PayID Protocol</samp> or <samp>PayID Protocol</samp>. The following terminology is used by this specification.</p>
<p></p>

<ul>
<li>Endpoint: either the client or the server of the connection.  <ul>
<li>Sending Endpoint: sending side of the transaction (wallet or exchange).</li>
<li>Receiving Endpoint: receiving side of the transaction (wallet or exchange).</li>
</ul>
</li>
<li>PayID client: The endpoint that initiates the PayID protocol.</li>
<li>PayID owner: The owner of the PayID URI as described in <a href="#PAYID-URI" class="xref">[PAYID-URI]</a>.</li>
<li>PayID server: The endpoint that returns payment account information.</li>
</ul>
<p id="rfc.section.1.p.3">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119" class="xref">[RFC2119]</a>.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#introduction" id="introduction">Introduction</a>
</h1>
<p><a href="#PAYID-URI" class="xref">[PAYID-URI]</a> describes a URI scheme to identify payment account(s) at a service provider. <a href="#PAYID-DISCOVERY" class="xref">[PAYID-DISCOVERY]</a>, on the other hand, defines how to transform a PayID URI into a PayID URL that can be used by other protocols to interact with a PayID-enabled service provider but does not define the protocol(s) to do so.</p>
<p id="rfc.section.2.p.2">This document specifies the PayID protocol - an application-layer protocol which can be used to interact with a PayID-enabled service provider identified by a PayID URL using standard HTTP methods over a secure transport. In its most basic mode, a PayID protocol resource returns a JavaScript Object Notation (JSON) object representing the payment account(s) information along with optional metadata corresponding to the queried PayID URI <a href="#PAYID-URI" class="xref">[PAYID-URI]</a>. The protocol defines new media formatting types for requests and responses, but uses normal HTTP content negotiation mechanisms for selecting alternatives that the PayID client and server may prefer in anticipation of serving different use cases.</p>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> <a href="#design-goals" id="design-goals">Design Goals</a>
</h1>
<p></p>

<ul><li>Extensibility</li></ul>
<p id="rfc.section.2.1.p.2">Although the primary use case for the payment account(s) information resource returned via the Basic PayID protocol is assumed to be for making payments, the PayID protocol is designed to be easily extensible to facilitate creation and retrieval of other resources about the PayID owner, PayID client and/or PayID server that might be required for making payments.</p>
<p></p>

<ul><li>Neutrality: Currency and Network Agnostic</li></ul>
<p id="rfc.section.2.1.p.4">The PayID protocol is designed to be a fundamentally neutral protocol. The PayID protocol is capable of returning a PayID owner's payment account(s) information for any network that they (or their service) can support. This makes the PayID protocol a network and currency agnostic protocol, capable of enabling payments in BTC, XRP, ERC-20 tokens, Lightning, ILP, or even fiat networks like ACH.</p>
<p></p>

<ul><li>Decentralized &amp; Peer-to-Peer</li></ul>
<p id="rfc.section.2.1.p.6">Just like email servers, anyone can run their own PayID server or use third-party hosted services. If self-hosted, the PayID protocol introduces no new counterparty risk or changes to a service&#8217;s security or privacy model. PayID protocol doesn&#8217;t require new, complex, and potentially unreliable peer discovery protocols, instead establishing direct peer-to-peer connections between communicating parties from the start.  PayID is built on the most successful decentralized network: the web. There is no designated centralized authority, or a risk of a patchwork of different standards in different jurisdictions that make a global solution impossibly complex.</p>
<p></p>

<ul><li>Service Sovereignty</li></ul>
<p id="rfc.section.2.1.p.8">Each service provider that uses PayID for their users maintains full control of its PayID URL space and PayID service, and has the ability to incorporate any policies they choose, including privacy, authentication, and security.  They also have full sovereignty over users on their domain, just like with email. PayID is highly generalized and does not prescribe any particular solution outside of the standardized communication, which makes it compatible with existing compliance and user management tools and philosophies.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#payid-server-discovery" id="payid-server-discovery">PayID Server Discovery</a>
</h1>
<p id="rfc.section.3.p.1">To support PayID protocol, the PayID client needs to discover the PayID URL corresponding to the PayID URI <a href="#PAYID-URI" class="xref">[PAYID-URI]</a>. This can be obtained either by using mechanisms described in <a href="#PAYID-DISCOVERY" class="xref">[PAYID-DISCOVERY]</a> or by manually entering the PayID URL.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#json-format-design" id="json-format-design">JSON Format Design</a>
</h1>
<p id="rfc.section.4.p.1">JSON, as described in [RFC8259][], defines a test format for serializing structured data. Objects are serialized as an unordered collection of name/value pairs. JSON does not define any semantics around the name/value pairs that make up an object. PayID protocol's JSON format defines name/value pairs that annotate a JSON object, property or array for PayID protocol resources.</p>
<p id="rfc.section.4.p.2">The PayID client MUST request a PayID response in JSON format through the <samp>Accept</samp> header with the media type as defined below, optionally followed by format parameters. One of the optional parameters is the case-insensitive <samp>q</samp> value as described in Section 5.3.1 of <a href="#RFC7231" class="xref">[RFC7231]</a> to indicate relative preference.</p>
<p id="rfc.section.4.p.3">Each message body is represented as a single JSON object. This object contains a name/value pair whose value is the correct representation for a primitive value as described in [RFC8259][], or an array or object as described in the section below.</p>
<p id="rfc.section.4.p.4">If the PayID server does not support JSON format, it MUST reply with an appropriate error response.</p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#http-method" id="http-method">HTTP Method</a>
</h1>
<p id="rfc.section.4.1.p.1">The PayID protocol payment account(s) information resource is requested using the HTTP GET method.</p>
<p id="rfc.section.4.1.p.2">Following are the media types to request the payment account(s) information resource on different payment-networks and environments.</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#media-type-of-the-payment-accounts-information-resource" id="media-type-of-the-payment-accounts-information-resource">Media Type of the Payment Account(s) Information Resource</a>
</h1>
<p id="rfc.section.4.2.p.1">The media type for the payment account information resource is <samp>application/* + json</samp>.</p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> <a href="#response-for-application-json" id="response-for-application-json">Response for application/* + json</a>
</h1>
<p id="rfc.section.4.3.p.1">The response body for <samp>application/* + json</samp> is a JSON object with the following name/value pairs.</p>
<pre>
  {
   optional string payId,
   required Address[] addresses,
   optional string memo,
   optional string identity,
   optional ProofOfControlSignature proofOfControlSignature
  }
</pre>
<h1 id="rfc.section.4.3.1">
<a href="#rfc.section.4.3.1">4.3.1.</a> <a href="#payid" id="payid">payId</a>
</h1>
<p id="rfc.section.4.3.1.p.1">The value of <samp>payId</samp> field is the PayID URI in the client request that identifies the payment account information that the JSON object describes.</p>
<p id="rfc.section.4.3.1.p.2">The <samp>payId</samp> field is an optional field in the response.</p>
<h1 id="rfc.section.4.3.2">
<a href="#rfc.section.4.3.2">4.3.2.</a> <a href="#addresses" id="addresses">addresses</a>
</h1>
<p id="rfc.section.4.3.2.p.1">The value of <samp>addresses</samp> field is a JSON array of type <samp>Address</samp> of one or more JSON objects with the following name/value pairs.</p>
<pre>
  {
   required string paymentNetwork,
   optional string environment,
   required string addressDetailsType,
   required addressDetailsType addressDetails
  }
</pre>
<p></p>

<ul>
<li>paymentNetwork: The value of payment-network as specified in the client request's <samp>Accept</samp> header</li>
<li>environment: The value of environment as specified in the client request's <samp>Accept</samp> header</li>
<li>addressDetailsType: The value of <samp>addressDetailsType</samp> is one of the following strings.  <ul>
<li>CryptoAddressDetails</li>
<li>ACHAddressDetails</li>
</ul>
</li>
<li>addressDetails: The value of <samp>addressDetails</samp> is the address information necessary to send payment on a specific payment-network and environment.</li>
</ul>
<p id="rfc.section.4.3.2.p.3">The <samp>addresses</samp> field MUST be present in the response.</p>
<h1 id="rfc.section.4.3.2.1">
<a href="#rfc.section.4.3.2.1">4.3.2.1.</a> <a href="#addressdetails" id="addressdetails">addressDetails</a>
</h1>
<p id="rfc.section.4.3.2.1.p.1">We define the following two types of payment address types.</p>
<p></p>

<ul>
<li>CryptoAddressDetails: This is a JSON object with the following name/value pairs.  <br><br> { required string address, optional string tag }  <ul>
<li>address: The value of <samp>address</samp> field contains the on-ledger address corresponding to this owner.</li>
<li>tag: The value of <samp>tag</samp> field is the tag value used by some cryptocurrencies to distinguish accounts contained within a singular address. E.g XRP Ledger's destination tag.</li>
</ul>
</li>
<li>ACHAddressDetails: This is a JSON object with the following name/value pairs.  <br><br> { required string accountNumber, required string routingNumber }  <ul>
<li>accountNumber: The value of <samp>accountNumber</samp> is the ACH account number.</li>
<li>routingNumber: The value of <samp>routingNumber</samp> is the ACH routing number.</li>
</ul>
</li>
</ul>
<h1 id="rfc.section.4.3.3">
<a href="#rfc.section.4.3.3">4.3.3.</a> <a href="#memo" id="memo">memo</a>
</h1>
<p id="rfc.section.4.3.3.p.1">The <samp>memo</samp> string may specify additional metadata corresponding to a payment.</p>
<p id="rfc.section.4.3.3.p.2">The <samp>memo</samp> string is an OPTIONAL field in the response.</p>
<h1 id="rfc.section.4.3.4">
<a href="#rfc.section.4.3.4">4.3.4.</a> <a href="#identity" id="identity">identity</a>
</h1>
<p id="rfc.section.4.3.4.p.1">The <samp>identity</samp> string may specify any additional identity information about the PayID owner or PayID server.</p>
<p id="rfc.section.4.3.4.p.2">The <samp>identity</samp> string is an OPTIONAL field in the response.</p>
<h1 id="rfc.section.4.3.5">
<a href="#rfc.section.4.3.5">4.3.5.</a> <a href="#proofofcontrolsignature" id="proofofcontrolsignature">proofOfControlSignature</a>
</h1>
<p id="rfc.section.4.3.5.p.1">The value of <samp>proofOfControlSignature</samp> field is a JSON object of type <samp>ProofOfControlSignature</samp> with the following name/value pairs.</p>
<pre>
  {
   required string publicKey,
   required string payID,
   required string hashAlgorithm,
   required string signature
  }
</pre>
<p></p>

<ul>
<li>publicKey: On-ledger public key of the Receiving Endpoint</li>
<li>payID: PayID URI of the PayID owner</li>
<li>hashAlgorithm: Hash algorithms used to hash the entire contents of the <samp>ProofOfControlSignature</samp> message.</li>
<li>signature: Digital signature over the hash of the entire contents of the <samp>ProofOfControlSignature</samp> message using the private key corresponding to the public key in <samp>publicKey</samp>. This is a proof that the Receiving Endpoint is the owner of the on-ledger public key in <samp>publicKey</samp>.</li>
</ul>
<p id="rfc.section.4.3.5.p.3">The <samp>proofOfControlSignature</samp> is an OPTIONAL field in the response.</p>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> <a href="#meaning-of-media-type-application-json" id="meaning-of-media-type-application-json">Meaning of Media Type application/* + json</a>
</h1>
<p><samp>*</samp> may represent different payment-networks and environments. In this document, we propose standards with the media types specific to XRP, ILP, and ACH payment networks. We also propose media types that return all addresses across all payment networks. Other payment networks MUST establish standard media types for their networks at IANA.</p>
<p></p>

<ul>
<li>Accept: application/payid-json Returns all payment account(s) information corresponding to the requested PayID URI</li>
<li>Accept: application/xrpl-mainnet+json</li>
</ul>
<p id="rfc.section.4.4.p.3">Returns XRPL mainnet XAddresses</p>
<p></p>

<ul><li>Accept: application/xrpl-testnet+json</li></ul>
<p id="rfc.section.4.4.p.5">Returns XRPL testnet XAddresses</p>
<p></p>

<ul><li>Accept: application/xrpl-devnet+json</li></ul>
<p id="rfc.section.4.4.p.7">Returns XRPL devnet XAddresses</p>
<p></p>

<ul><li>Accept: application/interledger-testnet+json</li></ul>
<p id="rfc.section.4.4.p.9">Returns mainnet payment pointer to initiate SPSP request</p>
<p></p>

<ul><li>Accept: application/interledger-devnet+json</li></ul>
<p id="rfc.section.4.4.p.11">Returns testnet payment pointer to initiate SPSP request</p>
<p></p>

<ul><li>Accept: application/ach+json</li></ul>
<p id="rfc.section.4.4.p.13">Returns account and routing number</p>
<p id="rfc.section.4.4.p.14">The PayID client MAY specify more than one media type along with the preference parameter. The server MUST respond as described in the Content Negotiation section below.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#header-fields" id="header-fields">Header Fields</a>
</h1>
<p id="rfc.section.5.p.1">PayID protocol defines semantics around the following request and response headers. Additional headers MAY be defined, but have no unique semantics defined in the PayID protocol.</p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> <a href="#common-headers" id="common-headers">Common Headers</a>
</h1>
<p id="rfc.section.5.1.p.1">The following headers are common between PayID requests and responses.</p>
<h1 id="rfc.section.5.1.1">
<a href="#rfc.section.5.1.1">5.1.1.</a> <a href="#header-content-type" id="header-content-type">Header Content-Type</a>
</h1>
<p id="rfc.section.5.1.1.p.1">PayID requests and responses with a JSON message body MUST have a <samp>Content-Type</samp> header value of <samp>application-json</samp>.</p>
<h1 id="rfc.section.5.1.2">
<a href="#rfc.section.5.1.2">5.1.2.</a> <a href="#header-content-length" id="header-content-length">Header Content-Length</a>
</h1>
<p id="rfc.section.5.1.2.p.1">As defined in [RFC7230][], a request or response SHOULD include a <samp>Content-Length</samp> header when the message's length can be determined prior to being transferred. PayID protocol does not add any additional requirements over HTTP for writing Content-Length.</p>
<h1 id="rfc.section.5.1.3">
<a href="#rfc.section.5.1.3">5.1.3.</a> <a href="#header-payid-version-todo" id="header-payid-version-todo">Header PayID-version (TODO)</a>
</h1>
<p id="rfc.section.5.1.3.p.1">The PayID client MUST include the PayID version request header field to specify the version of the PayID protocol used to generate the request.</p>
<p id="rfc.section.5.1.3.p.2">If present on a request, the PayID server MUST interpret the request according to the rules defined in the specified version of the PayID protocol or fail the request with an appropriate error response code.</p>
<p id="rfc.section.5.1.3.p.3">If not specified in a request, the PayID server MUST fail the request with an appropriate error code.</p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> <a href="#request-headers" id="request-headers">Request Headers</a>
</h1>
<p id="rfc.section.5.2.p.1">In addition to common Headers, the PayID client MUST specify the following request header.</p>
<h1 id="rfc.section.5.2.1">
<a href="#rfc.section.5.2.1">5.2.1.</a> <a href="#header-accept" id="header-accept">Header Accept</a>
</h1>
<p id="rfc.section.5.2.1.p.1">The PayID client MUST specify the <samp>Accept</samp> request header field with at least one of the registered media types (Section X). The purpose of this header is to indicate what type of content can be understood in the response. It specifies the <samp>payment-network</samp> and <samp>environment</samp> of the payment account and its representation format for which the PayID client wants to receive information. The representation format is always JSON.</p>
<p id="rfc.section.5.2.1.p.2">The PayID server MUST reject formats that specify unknown or unsupported format parameters.</p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> <a href="#response-headers" id="response-headers">Response Headers</a>
</h1>
<p id="rfc.section.5.3.p.1">In addition to the Common Headers, the PayID server MUST specify the following response header.</p>
<h1 id="rfc.section.5.3.1">
<a href="#rfc.section.5.3.1">5.3.1.</a> <a href="#header-cache-control" id="header-cache-control">Header Cache-Control</a>
</h1>
<p id="rfc.section.5.3.1.p.1">The PayID server MUST include the <samp>Cache-Control</samp> header with the max-age limit of 0. The intermediate hops or PayID client MUST NOT cache the responses.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#extensibility" id="extensibility">Extensibility</a>
</h1>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> <a href="#payload-extensibility" id="payload-extensibility">Payload Extensibility</a>
</h1>
<p id="rfc.section.6.1.p.1">PayID protocol supports extensibility in the payload, according to the specific format.</p>
<p id="rfc.section.6.1.p.2">Regardless of the format, additional content MUST NOT be present if it needs to be understood by the receiver in order to correctly interpret the payload according to the specified PayID-Version header. Thus, clients MUST be prepared to handle or safely ignore any content not specifically defined in the version of the payload specified by the PayID-version header.</p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> <a href="#header-field-extensibility" id="header-field-extensibility">Header Field Extensibility</a>
</h1>
<p id="rfc.section.6.2.p.1">The PayID protocol defines semantics around certain HTTP request and response headers. Services that support a version of the PayID protocol conform to the processing requirements for the headers defined by this specification for that version.</p>
<p id="rfc.section.6.2.p.2">Individual services MAY define custom headers. These headers MUST NOT begin with PayID. Custom headers SHOULD be optional when making requests to the service. A service MUST NOT require the PayID client to understand custom headers to accurately interpret the response.</p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> <a href="#format-extensibility" id="format-extensibility">Format Extensibility</a>
</h1>
<p id="rfc.section.6.3.p.1">A PayID service MUST support JSON format as described above and MAY support additional formats response bodies.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#basic-payid-protocol" id="basic-payid-protocol">Basic PayID Protocol</a>
</h1>
<p id="rfc.section.7.p.1">The Basic PayID protocol is used to request a payment account(s) information resource identified by a PayID URI from a PayID-enabled service provider identified by a PayID URL using HTTP over secure transport. When successful, the PayID protocol always returns the JSON representation of a payment account(s) information resource along with optional metadata. This information can be used for any purposes outside the scope of this document, though it is expected the most common application would be making payment.</p>
<p id="rfc.section.7.p.2">The Basic PayID protocol comprises request and response messages, each of which is defined in more detail below. The following is a visual representation of the basic protocol flow:</p>
<pre>
PayID client                                         PayID server
   |                                                          |
   |              1.) GET request to PayID URL                |
   |---------------------------------------------------------&gt;|
   |                                                          | |                                                          |
   |              2.) 200 Ok                                  |
   |                  Payment account information response    |
   |&lt;---------------------------------------------------------|
   |                                                          |
   |                                                          |
</pre>
<h1 id="rfc.section.7.1">
<a href="#rfc.section.7.1">7.1.</a> <a href="#step-1-http-request-to-payid-url-using-http-get-method" id="step-1-http-request-to-payid-url-using-http-get-method">Step 1: HTTP Request to PayID URL using HTTP GET Method</a>
</h1>
<p id="rfc.section.7.1.p.1">A basic PayID client issues a query using the HTTP GET method to the PayID URL without any query parameters and body.</p>
<p id="rfc.section.7.1.p.2">The PayID client MUST query the PayID server using HTTPS only. <a href="#RFC2818" class="xref">[RFC2818]</a> defines how HTTPS verifies the PayID server's identity. If the HTTPS connection cannot be established for any reason, then the PayID client MUST accept that the PayID request has failed and MUST NOT attempt to reissue the PayID request using HTTP over a non-secure connection.</p>
<h1 id="rfc.section.7.2">
<a href="#rfc.section.7.2">7.2.</a> <a href="#step-2-payment-account-information-response" id="step-2-payment-account-information-response">Step 2: Payment Account Information Response</a>
</h1>
<p id="rfc.section.7.2.p.1">In response, the PayID server returns a JSON object representation of a payment account(s) information resource for the payment-network and environment requested by the PayID client in the request <samp>Accept</samp> header field, along with other required and/or optional metadata.</p>
<p id="rfc.section.7.2.p.2">A PayID server MUST be able to process the <samp>application/payid+json</samp> header type.</p>
<p id="rfc.section.7.2.p.3">If the PayID server does not contain the payment account information corresponding to the request, the PayID server MUST respond with an appropriate error message.</p>
<p id="rfc.section.7.2.p.4">A PayID server MAY redirect the PayID client; if it does, the redirection MUST only be to an <samp>https</samp> URI and the PayID client MUST perform certificate validation again when redirected.</p>
<h1 id="rfc.section.7.3">
<a href="#rfc.section.7.3">7.3.</a> <a href="#step-3-parse-payment-account-information-response" id="step-3-parse-payment-account-information-response">Step 3: Parse Payment Account Information Response</a>
</h1>
<p id="rfc.section.7.3.p.1">If the PayID server returns a valid response, the response will contain one or more of the fields defined above.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#example-use-of-basic-payid-protocol" id="example-use-of-basic-payid-protocol">Example Use of Basic PayID Protocol</a>
</h1>
<p id="rfc.section.8.p.1">This section shows sample use of Basic PayID protocol in several hypothetical scenarios.</p>
<h1 id="rfc.section.8.1">
<a href="#rfc.section.8.1">8.1.</a> <a href="#basic-payid-protocol-by-a-wallet" id="basic-payid-protocol-by-a-wallet">Basic PayID Protocol by a Wallet</a>
</h1>
<p id="rfc.section.8.1.p.1">Suppose Alice wishes to send a friend some XRP from a web-based wallet provider that Alice has an account on. Alice would log-in to the wallet provider and enter Bob's PayID (say, <samp>bob$receiver.example.com</samp>) into the wallet UI to start the payment.  The Wallet application would first discover the PayID URL for the PayID service-provider using one of the mechanisms described in PayID discovery <a href="#PAYID-DISCOVERY" class="xref">[PAYID-DISCOVERY]</a> protocol.</p>
<p id="rfc.section.8.1.p.2">The Wallet application would then issue an HTTPS GET request:</p>
<pre>
 GET /users/bob HTTP/1.1
 Host: www.receiver.example.com
 Accept: application/payid+json
 PayID-version: 1.0
</pre>
<p id="rfc.section.8.1.p.3">The PayID server might respond like this:</p>
<pre>
 HTTP/1.1 200 OK
 Content-Type: application/json
 Content-Length: 403
 PayID-version: 1.0
 Cache-Control: max-age=0
 Server: Apache/1.3.11
 {
   "payId" : "bob$receiver.example.com",
   "addresses" :
   [
     {
       "paymentNetwork" : "xrpl",
       "environment" : "testnet",
       "addressDetailsType" : "CryptoAddressDetails",
       "addressDetails" : {
                    "address" : "XTVQWr6BhgBLW2jbFyqqufgq8T9eN7KresB684ZSHKQ3oDth"
            }
      },
     {
       "paymentNetwork" : "ach",
       "environment" : "mainnet",
       "addressDetailsType" : "ACHAddressDetails",
       "addressDetails" : {
                    "accountNumber" : "5674536253",
                    "routingNumber" : "aYJTDFGLKAJD"
            }
      }
    ],
    "memo" : "Additional optional Information"
 }
</pre>
<p id="rfc.section.8.1.p.4">In the above example we see that the PayID server returned a list of payment accounts identified by PayID <samp>bob$receiver.example.com</samp>. This is because Alice's Wallet asked for all the payment accounts corresponding to the PayID in the <samp>Accept</samp> header.  Alice's Wallet MAY then use the payment account information to make payments.</p>
<p id="rfc.section.8.1.p.5">Another example:</p>
<pre>
 GET /users/bob HTTP/1.1
 Host: www.receiver.example.com
 Accept: application/xrpl-testnet+json; q=0.4,
         application/ach+json; q=0.1
 PayID-version= 1.0
</pre>
<p id="rfc.section.8.1.p.6">The PayID server might respond like this:</p>
<pre>
 HTTP/1.1 200 OK
 Content-Type: application/json
 Content-Length: 403
 PayID-version: 1.0
 Cache-Control: max-age=0
 Server: Apache/1.3.11
 {
   "payId" : "bob$receiver.example.com",
   "addresses" :
   [
     {
       "paymentNetwork" : "xrpl",
       "environment" : "testnet",
       "addressDetailsType" : "CryptoAddressDetails",
       "addressDetails" : {
                    "address" : "XTVQWr6BhgBLW2jbFyqqufgq8T9eN7KresB684ZSHKQ3oDth"
            }
      }
    ]
 }
</pre>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#common-response-status-codes-todo" id="common-response-status-codes-todo">Common Response Status Codes (TODO)</a>
</h1>
<p id="rfc.section.9.p.1">A PayID server MAY respond to a request using any valid HTTP response code appropriate for the request. The PayID server SHOULD be as specific as possible in its choice of an HTTP specific status code.</p>
<h1 id="rfc.section.9.1">
<a href="#rfc.section.9.1">9.1.</a> <a href="#success-responses" id="success-responses">Success Responses</a>
</h1>
<p id="rfc.section.9.1.p.1">The following response codes represent successful requests.</p>
<h1 id="rfc.section.9.1.1">
<a href="#rfc.section.9.1.1">9.1.1.</a> <a href="#response-code-200-ok" id="response-code-200-ok">Response Code 200 OK</a>
</h1>
<p id="rfc.section.9.1.1.p.1">A request that does not create a resource returns 200 OK if it is completed successfully and the value of the resource is not null. null. In this case, the response body MUST contain the value of the resource specified in the request URL.</p>
<h1 id="rfc.section.9.1.2">
<a href="#rfc.section.9.1.2">9.1.2.</a> <a href="#response-code-3xx-redirection" id="response-code-3xx-redirection">Response Code 3xx Redirection</a>
</h1>
<p id="rfc.section.9.1.2.p.1">As per <a href="#RFC7231" class="xref">[RFC7231]</a>, a 3xx Redirection indicates that further action needs to be taken by the client in order to fulfill the request. In this case, the response SHOULD include a Location header, as appropriate, with the URL from which the result can be obtained; it MAY include a Retry-After header.</p>
<h1 id="rfc.section.9.2">
<a href="#rfc.section.9.2">9.2.</a> <a href="#client-error-responses" id="client-error-responses">Client Error Responses</a>
</h1>
<p id="rfc.section.9.2.p.1">Error codes in the 4xx range indicate a client error, such as a malformed request.  In the case that a response body is defined for the error code, the body of the error is as defined for the appropriate format.</p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> <a href="#content-negotiation" id="content-negotiation">Content Negotiation</a>
</h1>
<p id="rfc.section.10.p.1">The PayID client MAY choose to query for all possible payment addresses corresponding to a PayID URI</p>
<pre>
 GET / HTTP/1.1
 Accept: application/all+json
</pre>
<p id="rfc.section.10.p.2">In this case, the PayID server MAY respond with all payment account(s) information associated with the queried PayID.</p>
<p id="rfc.section.10.p.3">Alternatively, the PayID client MAY choose to query for a subset payment account(s) information in the order of preference.</p>
<pre>
 GET / HTTP/1.1
 Accept: application/xrpl-testnet+json; q=0.4,
         application/xrpl-mainnet+json; q= 0.1
</pre>
<p id="rfc.section.10.p.4">In this case, the PayID server MUST respond with the payment account(s) information corresponding to at least one of the payment-networks and environments mentioned in the <samp>Accept</samp> header in the order of client request preference. If none of those exist, the PayID server MUST send an appropriate error response.</p>
<p id="rfc.section.10.p.5">Alternatively, the PayID client MAY combine the above two approaches.</p>
<pre>
 GET / HTTP/1.1
 Accept: application/xrpl-testnet+json; q=0.4,
         application/xrpl-mainnet+json; q= 0.1,
         application/payid+json
</pre>
<p id="rfc.section.10.p.6">In this case, the PayID server MUST respond with the payment account information corresponding to at least one of the payment-network and environment mentioned in the <samp>Accept</samp> header in the order of PayID client's preference. If none of those exist, then the PayID server MUST respond with payment account(s) information corresponding to all payment accounts associated with the queried PayID URI.</p>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> <a href="#versioningtodo" id="versioningtodo">Versioning(TODO)</a>
</h1>
<p id="rfc.section.11.p.1">Versioning enables clients and servers to evolve independently. PayID protocol defines semantics for protocol versioning.</p>
<p id="rfc.section.11.p.2">PayID requests and responses are versioned according to the PayID-version header.  PayID clients include the PayID-version header in order to specify the maximum acceptable response version. PayID servers respond with the maximum supported version that is less than or equal to the requested <samp>major</samp></p>
<h1 id="rfc.section.12">
<a href="#rfc.section.12">12.</a> <a href="#security-considerations" id="security-considerations">Security Considerations</a>
</h1>
<p id="rfc.section.12.p.1">This security considerations section only considers PayID clients and servers bound to implementations as defined in this document. Such implementations have the following characteristics:</p>
<p></p>

<ul><li>PayID URIs are static and well-known to the PayID client; PayID server URLs can be static or discovered.</li></ul>
<p id="rfc.section.12.p.3">The following are considered out-of-scope:</p>
<p></p>

<ul>
<li>Communication between the PayID owner and the wallet or exchange (which acts as PayID server) for PayID URI registration, etc.</li>
<li>Communication between the sender of the transaction and the PayID client to transfer information such as PayID URI and other transaction details, etc.</li>
<li>PayID server URL discovery by the PayID client. Implementations using PayID-Discovery <a href="#PAYID-DISCOVERY" class="xref">[PAYID-DISCOVERY]</a> MUST consider the security considerations in the corresponding document.</li>
<li>PayID server URL resolution by the PayID client. Implementations using DNS, DNSSEC, DoH, DoT, etc. MUST consider the security considerations of the corresponding documents.</li>
</ul>
<h1 id="rfc.section.12.1">
<a href="#rfc.section.12.1">12.1.</a> <a href="#network-attacks" id="network-attacks">Network Attacks</a>
</h1>
<p id="rfc.section.12.1.p.1">Basic PayID protocol's security model assumes the following network attackers:</p>
<p></p>

<ul>
<li>Off-path attacker: An off-path attacker can be anywhere on the network. She can inject and spoof packets but can not observe, or tamper with the legitimate traffic between the PayID client and the server.</li>
<li>On-path attacker: An on-path attacker can eavesdrop, inject, spoof and replay packets, but can not drop, delay or tamper with the legitimate traffic.</li>
<li>In-path or Man-in-the-middle (MiTM) attacker: An MiTM is the most powerful network attacker. An MiTM has full access to the communication path between the PayID client and the server. She can observe, modify, delay and drop network packets.</li>
</ul>
<p id="rfc.section.12.1.p.3">Additionally we assume that the attacker has enough resources to mount an attack but can not break the security guarantees provided by the cryptographic primitives of the underlying secure transport.</p>
<p id="rfc.section.12.1.p.4">The basic PayID protocol runs over HTTPS and thus relies on the security of the underlying transport. Implementations utilizing TLS 1.3 benefit from the TLS security profile defined in <a href="#RFC8446" class="xref">[RFC8446]</a> against all the above network attackers.</p>
<h1 id="rfc.section.12.1.1">
<a href="#rfc.section.12.1.1">12.1.1.</a> <a href="#denial-of-service-dos-attacks" id="denial-of-service-dos-attacks">Denial-of-Service (DoS) attacks</a>
</h1>
<p id="rfc.section.12.1.1.p.1">As such, cryptography can not defend against DoS attacks because any attacker can stop/interrupt the PayID protocol by: * Dropping network packets, * Exhaustion of resources either at the network level or at PayID client and/or server.</p>
<p id="rfc.section.12.1.1.p.2">The PayID servers are recommended to follow general best network configuration practices to defend against such attacks <a href="#RFC4732" class="xref">[RFC4732]</a>.</p>
<h1 id="rfc.section.12.2">
<a href="#rfc.section.12.2">12.2.</a> <a href="#information-integrity" id="information-integrity">Information Integrity</a>
</h1>
<p id="rfc.section.12.2.p.1">The HTTPS connection provides transport security for the interaction between PayID client and server but does not provide the response integrity of the data provided by PayID server. A PayID client has no way of knowing if data provided in the payment account information resource has been manipulated at the PayID server, either due to malicious behavior on the part of the PayID server administrator or as a result of being compromised by an attacker. As with any information service available on the Internet, PayID clients should be wary of the information received from untrusted sources.</p>
<h1 id="rfc.section.13">
<a href="#rfc.section.13">13.</a> <a href="#privacy-considerations" id="privacy-considerations">Privacy Considerations</a>
</h1>
<p id="rfc.section.13.p.1">The PayID client and server should be aware that placing information on the Internet means that any one can access that information. While PayID protocol is an extremely useful tool to discovering payment account(s) information corresponding to a human-rememberable PayID URI, PayID owners should also understand the associated privacy risks. The easy access to payment account information via PayID protocol was a design goal of the protocol, not a limitation.</p>
<h1 id="rfc.section.13.1">
<a href="#rfc.section.13.1">13.1.</a> <a href="#access-control" id="access-control">Access Control</a>
</h1>
<p id="rfc.section.13.1.p.1">PayID protocol MUST NOT be used to provide payment account(s) information corresponding to a PayID URI unless providing that data via PayID protocol by the relevant PayID server was explicitly authorized by the PayID owner. If a PayID owner wishes to limit access to information, PayID servers MAY provide an interface by which PayID owners can select which information is exposed through the PayID server interface. For example, PayID servers MAY allow PayID owners to mark certain data as <samp>public</samp> and then utilize that marking as a means of determining what information to expose via PayID protocol. The PayID servers MAY also allow PayID owners to provide a whitelist of users who are authorized to access the specific information. In such a case, the PayID server MUST authenticate the PayID client.</p>
<h1 id="rfc.section.13.2">
<a href="#rfc.section.13.2">13.2.</a> <a href="#payment-address-rotation" id="payment-address-rotation">Payment Address Rotation</a>
</h1>
<p id="rfc.section.13.2.p.1">The power of PayID protocol comes from providing a single place where others can find payment account(s) information corresponding to a PayID URI, but PayID owners should be aware of how easily payment account information that one might publish can be used in unintended ways. As one example, one might query a PayID server only to see if a given PayID URI is valid and if so, get the list of associated payment account information. If the PayID server uses the same payment address each time, it becomes easy for a third-party to track one's entire payment history. The PayID server MUST follow the best practice of payment address rotation for every query to mitigate this privacy concern.</p>
<h1 id="rfc.section.13.3">
<a href="#rfc.section.13.3">13.3.</a> <a href="#on-the-wire" id="on-the-wire">On the Wire</a>
</h1>
<p id="rfc.section.13.3.p.1">PayID protocol over HTTPS encrypts the traffic and requires mutual authentication of the PayID client and the PayID server. This mitigates both passive surveillance <a href="#RFC7258" class="xref">[RFC7258]</a> and the active attacks that attempt to divert PayID protocol queries to rogue servers.</p>
<p id="rfc.section.13.3.p.2">Additionally, the use of the HTTPS default port 443 and the ability to mix PayID protocol traffic with other HTTPS traffic on the same connection can deter unprivileged on-path devices from interfering with PayID operations and make PayID traffic analysis more difficult.</p>
<h1 id="rfc.section.13.4">
<a href="#rfc.section.13.4">13.4.</a> <a href="#in-the-payid-server" id="in-the-payid-server">In the PayID Server</a>
</h1>
<p id="rfc.section.13.4.p.1">The Basic PayID protocol data contains no information about the PayID client; however, various transports of PayID queries and responses do provide data that can be used to correlate requests. A Basic PayID protocol implementation is built on IP, TCP, TLS and HTTP. Each layer contains one or more common features that can be used to correlate queries to the same identity.</p>
<p id="rfc.section.13.4.p.2">At the IP level, the PayID client address provides obvious correlation information. This can be mitigated by use of NAT, proxy, VPN, or simple address rotation over time. It may be aggravated  by use of a PayID server that can correlate real-time addressing information with other identifiers, such as when PayID server and other services are operated by the same entity.</p>
<p id="rfc.section.13.4.p.3">PayID client implementations that use one TCP connection for multiple PayID requests directly group those requests. Long-lived connections have better performance behaviours than short-lived connections; however they group more requests, which can expose more information to correlation and consolidation. TCP-based solutions may also seek performance through the use of TCP Fast Open <a href="#RFC7413" class="xref">[RFC7413]</a>. The cookies used in TCP Fast open may allow PayID servers to correlate TLS connections together.</p>
<p id="rfc.section.13.4.p.4">TCP-based implementations often achieve better handshake performance through the use of some form of session resumption mechanism, such as Section 2.2 of <a href="#RFC8446" class="xref">[RFC8446]</a>. Session resumption creates a trivial mechanism for a server to correlate TLS connections together.</p>
<p id="rfc.section.13.4.p.5">HTTP's feature set can also be used for identification and tracking in a number of ways. For example, Authentication request header fields explicitly identify profiles in use and HTTP cookies are designed as an explicit state-tracking mechanism and are often used as an authentication mechanism.</p>
<p id="rfc.section.13.4.p.6">Additionally, the <samp>User-Agent</samp> and <samp>Accept-Language</samp> request header fields often convey specific information about the PayID client version or locale. This allows for content-negotiation and operational work-arounds for implementation bugs. Request header fields that control caching can expose state information about a subset of the client's history. Mixing PayID queries with other HTTP requests on the same connection also provides an opportunity for richer data correlation.</p>
<p id="rfc.section.13.4.p.7">The PayID protocol design allows implementations to fully leverage the HTTP ecosystem, including features that are not enumerated in this document. Utilizing the full set of HTTP features enables PayID to be more than HTTP tunnel, but it is at the cost of opening up implementations to the full set of privacy considerations of HTTP.</p>
<p id="rfc.section.13.4.p.8">Implementations of PayID clients and servers need to consider the benefits and privacy impacts of these features, and their deployment context, when deciding whether or not to enable them. Implementations are advised to expose the minimal set of data needed to achieve the desired feature set.</p>
<p id="rfc.section.13.4.p.9">Determining whether or not PayID client implementation requires HTTP cookie <a href="#RFC6265" class="xref">[RFC6265]</a> support is particularly important because HTTP cookies are the primary state tracking mechanism in HTTP, HTTP cookies SHOULD NOT be accepted by PayID clients unless they are explicitly required by a use case.</p>
<p id="rfc.section.13.4.p.10">Overall, the PayID protocol does not introduce significant additional privacy concerns beyond those associated with using the underlying IP, TCP, TLS and HTTP layers.</p>
<h1 id="rfc.section.14">
<a href="#rfc.section.14">14.</a> <a href="#iana-considerations" id="iana-considerations">IANA Considerations</a>
</h1>
<p id="rfc.section.14.p.1">This document defines registries for PayID protocol version and application/* +json media types.</p>
<h1 id="rfc.section.14.1">
<a href="#rfc.section.14.1">14.1.</a> <a href="#header-field-registration" id="header-field-registration">Header Field Registration</a>
</h1>
<p id="rfc.section.14.1.p.1">Header field name: PayID-version: major.minor</p>
<p id="rfc.section.14.1.p.2">Applicable Protocol: "PayID protocol"</p>
<p id="rfc.section.14.1.p.3">Status: <samp>standard</samp></p>
<p id="rfc.section.14.1.p.4">Author/Change controller: Refer to the contact details of the authors in this document.</p>
<p id="rfc.section.14.1.p.5">Specification Document: <samp>PayID protocol</samp></p>
<h1 id="rfc.section.14.2">
<a href="#rfc.section.14.2">14.2.</a> <a href="#media-type-registration" id="media-type-registration">Media Type Registration</a>
</h1>
<p id="rfc.section.14.2.p.1">This document registers multiple media types, listed in Table 1.</p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">Type</th>
<th class="left">Subtype</th>
<th class="left">Specification</th>
</tr></thead>
<tbody>
<tr>
<td class="left">application</td>
<td class="left">xrpl-mainnet+json</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">application</td>
<td class="left">xrpl-testnet+json</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">application</td>
<td class="left">xrpl-devnet+json</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">application</td>
<td class="left">ach+json</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">application</td>
<td class="left">interledger-mainnet+json</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">application</td>
<td class="left">interledger-testnet+json</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">application</td>
<td class="left">payid+json</td>
<td class="left"></td>
</tr>
</tbody>
</table>
<p id="rfc.section.14.2.p.2">Type Name: application</p>
<p id="rfc.section.14.2.p.3">Subtype name: This document registers multiple subtypes as listed in table 1</p>
<p id="rfc.section.14.2.p.4">Required parameters: n/a</p>
<p id="rfc.section.14.2.p.5">Optional parameters: n/a</p>
<p id="rfc.section.14.2.p.6">Encoding considerations:  Encoding considerations are identical to those specified for the "application/json" media type. See[RFC7159][].</p>
<p id="rfc.section.14.2.p.7">Security considerations: Security considerations relating to the generation and consumption of PayID protocol messages are discussed in Section X.</p>
<p id="rfc.section.14.2.p.8">Interoperability considerations:  This document specifies the format of conforming messages and the interpretation thereof.</p>
<p id="rfc.section.14.2.p.9">Published specification: This document is the specification for these media types; see Table 1 for the section documenting each media type.</p>
<p id="rfc.section.14.2.p.10">Applications that use this media type:  PayID servers and PayID clients.</p>
<p id="rfc.section.14.2.p.11">Additional information:</p>
<p id="rfc.section.14.2.p.12">Magic number(s):  n/a</p>
<p id="rfc.section.14.2.p.13">File extension(s):  This document uses the mime type to refer to protocol messages and thus does not require a file extension.</p>
<p id="rfc.section.14.2.p.14">Macintosh file type code(s):  n/a</p>
<p id="rfc.section.14.2.p.15">Person &amp; email address to contact for further information:  See Authors' Addresses section.</p>
<p id="rfc.section.14.2.p.16">Intended usage:  COMMON</p>
<p id="rfc.section.14.2.p.17">Restrictions on usage:  n/a</p>
<p id="rfc.section.14.2.p.18">Author:  See Authors' Addresses section.</p>
<p id="rfc.section.14.2.p.19">Change controller:  Internet Engineering Task Force (mailto:iesg@ietf.org).</p>
<h1 id="rfc.section.15">
<a href="#rfc.section.15">15.</a> <a href="#acknowledgments" id="acknowledgments">Acknowledgments</a>
</h1>
<h1 id="rfc.references">
<a href="#rfc.references">16.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">16.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="PAYID-DISCOVERY">[PAYID-DISCOVERY]</b></td>
<td class="top">
<a>Fuelling, D.</a>, "<a>PayID Discovery</a>", n.d..</td>
</tr>
<tr>
<td class="reference"><b id="PAYID-URI">[PAYID-URI]</b></td>
<td class="top">
<a>Fuelling, D.</a>, "<a href="https://tbd.example.com/">The 'payid' URI Scheme</a>", n.d..</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a>Bradner, S.</a>, "<a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2818">[RFC2818]</b></td>
<td class="top">
<a>Rescorla, E.</a>, "<a href="https://tools.ietf.org/html/rfc2818">HTTP Over TLS</a>", RFC 2818, DOI 10.17487/RFC2818, May 2000.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6265">[RFC6265]</b></td>
<td class="top">
<a>Barth, A.</a>, "<a href="https://tools.ietf.org/html/rfc6265">HTTP State Management Mechanism</a>", RFC 6265, DOI 10.17487/RFC6265, April 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC7231">[RFC7231]</b></td>
<td class="top">
<a>Fielding, R.</a> and <a>J. Reschke</a>, "<a href="https://tools.ietf.org/html/rfc7231">Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content</a>", RFC 7231, DOI 10.17487/RFC7231, June 2014.</td>
</tr>
<tr>
<td class="reference"><b id="RFC7258">[RFC7258]</b></td>
<td class="top">
<a>Farrell, S.</a> and <a>H. Tschofenig</a>, "<a href="https://tools.ietf.org/html/rfc7258">Pervasive Monitoring Is an Attack</a>", BCP 188, RFC 7258, DOI 10.17487/RFC7258, May 2014.</td>
</tr>
<tr>
<td class="reference"><b id="RFC7413">[RFC7413]</b></td>
<td class="top">
<a>Cheng, Y.</a>, <a>Chu, J.</a>, <a>Radhakrishnan, S.</a> and <a>A. Jain</a>, "<a href="https://tools.ietf.org/html/rfc7413">TCP Fast Open</a>", RFC 7413, DOI 10.17487/RFC7413, December 2014.</td>
</tr>
<tr>
<td class="reference"><b id="RFC8446">[RFC8446]</b></td>
<td class="top">
<a>Rescorla, E.</a>, "<a href="https://tools.ietf.org/html/rfc8446">The Transport Layer Security (TLS) Protocol Version 1.3</a>", RFC 8446, DOI 10.17487/RFC8446, August 2018.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">16.2.</a> Informative References</h1>
<table><tbody><tr>
<td class="reference"><b id="RFC4732">[RFC4732]</b></td>
<td class="top">
<a>Handley, M.</a>, <a>Rescorla, E.</a> and <a>IAB</a>, "<a href="https://tools.ietf.org/html/rfc4732">Internet Denial-of-Service Considerations</a>", RFC 4732, DOI 10.17487/RFC4732, December 2006.</td>
</tr></tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Aanchal Malhotra</span> 
	  <span class="n hidden">
		<span class="family-name">Malhotra</span>
	  </span>
	</span>
	<span class="org vcardline">Ripple</span>
	<span class="adr">
	  <span class="vcardline">315 Montgomery Street</span>

	  <span class="vcardline">
		<span class="locality">San Francisco</span>,  
		<span class="region">CA</span> 
		<span class="code">94104</span>
	  </span>
	  <span class="country-name vcardline">US</span>
	</span>
	<span class="vcardline">Phone: -----------------</span>

<span class="vcardline">EMail: <a href="mailto:amalhotra@ripple.com">amalhotra@ripple.com</a></span>

<span class="vcardline">URI: <a href="https://www.ripple.com">https://www.ripple.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">David Schwartz</span> 
	  <span class="n hidden">
		<span class="family-name">Schwartz</span>
	  </span>
	</span>
	<span class="org vcardline">Ripple</span>
	<span class="adr">
	  <span class="vcardline">315 Montgomery Street</span>

	  <span class="vcardline">
		<span class="locality">San Francisco</span>,  
		<span class="region">CA</span> 
		<span class="code">94104</span>
	  </span>
	  <span class="country-name vcardline">US</span>
	</span>
	<span class="vcardline">Phone: -----------------</span>

<span class="vcardline">EMail: <a href="mailto:david@ripple.com">david@ripple.com</a></span>

<span class="vcardline">URI: <a href="https://www.ripple.com">https://www.ripple.com</a></span>

  </address>
</div>

</body>
</html>
